<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Implementing Arithmetic Operations - Data Structures and Algorithms for Coding Interviews</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Data Structures and Algorithms for Coding Interviews</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="implementing-arithmetic-operations"><a class="header" href="#implementing-arithmetic-operations">Implementing Arithmetic Operations</a></h1>
<h2 id="addsubtract-two-integers"><a class="header" href="#addsubtract-two-integers">Add/Subtract Two Integers</a></h2>
<h2 id="multiply-two-integers"><a class="header" href="#multiply-two-integers">Multiply Two Integers</a></h2>
<h2 id="divide-two-integers"><a class="header" href="#divide-two-integers">Divide Two Integers</a></h2>
<details><summary>Description:</summary>
<pre><code>comments: true
difficulty: Medium
edit_url: https://github.com/doocs/leetcode/edit/main/solution/0000-0099/0029.Divide%20Two%20Integers/README_EN.md
tags:
    - Bit Manipulation
    - Math
</code></pre>
<!-- problem:start -->
<h1 id="29-divide-two-integers"><a class="header" href="#29-divide-two-integers"><a href="https://leetcode.com/problems/divide-two-integers">29. Divide Two Integers</a></a></h1>
<p><a href="/solution/0000-0099/0029.Divide%20Two%20Integers/README.html">中文文档</a></p>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<!-- description:start -->
<p>Given two integers <code>dividend</code> and <code>divisor</code>, divide two integers <strong>without</strong> using multiplication, division, and mod operator.</p>
<p>The integer division should truncate toward zero, which means losing its fractional part. For example, <code>8.345</code> would be truncated to <code>8</code>, and <code>-2.7335</code> would be truncated to <code>-2</code>.</p>
<p>Return <em>the <strong>quotient</strong> after dividing </em><code>dividend</code><em> by </em><code>divisor</code>.</p>
<p><strong>Note: </strong>Assume we are dealing with an environment that could only store integers within the <strong>32-bit</strong> signed integer range: <code>[&minus;2<sup>31</sup>, 2<sup>31</sup> &minus; 1]</code>. For this problem, if the quotient is <strong>strictly greater than</strong> <code>2<sup>31</sup> - 1</code>, then return <code>2<sup>31</sup> - 1</code>, and if the quotient is <strong>strictly less than</strong> <code>-2<sup>31</sup></code>, then return <code>-2<sup>31</sup></code>.</p>
<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<pre>
<strong>Input:</strong> dividend = 10, divisor = 3
<strong>Output:</strong> 3
<strong>Explanation:</strong> 10/3 = 3.33333.. which is truncated to 3.
</pre>
<p><strong class="example">Example 2:</strong></p>
<pre>
<strong>Input:</strong> dividend = 7, divisor = -3
<strong>Output:</strong> -2
<strong>Explanation:</strong> 7/-3 = -2.33333.. which is truncated to -2.
</pre>
<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>
<ul>
	<li><code>-2<sup>31</sup> &lt;= dividend, divisor &lt;= 2<sup>31</sup> - 1</code></li>
	<li><code>divisor != 0</code></li>
</ul>
<!-- description:end -->
<h2 id="solutions"><a class="header" href="#solutions">Solutions</a></h2>
<!-- solution:start -->
<h3 id="solution-1-simulation--fast-power"><a class="header" href="#solution-1-simulation--fast-power">Solution 1: Simulation + Fast Power</a></h3>
<p>Division is essentially subtraction. The problem requires us to calculate the integer result after dividing two numbers, which is actually calculating how many divisors and a number less than the divisor constitute the dividend. However, only one subtraction can be done in one loop, which is too inefficient and will lead to timeout. This can be optimized by using the idea of fast power.</p>
<p>It should be noted that since the problem explicitly requires that only 32-bit signed integers can be used at most, the divisor and dividend need to be converted to negative numbers for calculation. Because converting to positive numbers may cause overflow, such as when the dividend is <code>INT32_MIN</code>, it will be greater than <code>INT32_MAX</code> when converted to a positive number.</p>
<p>Assuming the dividend is $a$ and the divisor is $b$, the time complexity is $O(\log a \times \log b)$, and the space complexity is $O(1)$.</p>
<!-- tabs:start -->
<h4 id="python3"><a class="header" href="#python3">Python3</a></h4>
<pre><code class="language-python">class Solution:
    def divide(self, a: int, b: int) -&gt; int:
        if b == 1:
            return a
        if a == -(2**31) and b == -1:
            return 2**31 - 1
        sign = (a &gt; 0 and b &gt; 0) or (a &lt; 0 and b &lt; 0)
        a = -a if a &gt; 0 else a
        b = -b if b &gt; 0 else b
        ans = 0
        while a &lt;= b:
            x = b
            cnt = 1
            while x &gt;= (-(2**30)) and a &lt;= (x &lt;&lt; 1):
                x &lt;&lt;= 1
                cnt &lt;&lt;= 1
            a -= x
            ans += cnt
        return ans if sign else -ans
</code></pre>
<h4 id="java"><a class="header" href="#java">Java</a></h4>
<pre><code class="language-java">class Solution {
    public int divide(int a, int b) {
        if (b == 1) {
            return a;
        }
        if (a == Integer.MIN_VALUE &amp;&amp; b == -1) {
            return Integer.MAX_VALUE;
        }
        boolean sign = (a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0);
        a = a &gt; 0 ? -a : a;
        b = b &gt; 0 ? -b : b;
        int ans = 0;
        while (a &lt;= b) {
            int x = b;
            int cnt = 1;
            while (x &gt;= (Integer.MIN_VALUE &gt;&gt; 1) &amp;&amp; a &lt;= (x &lt;&lt; 1)) {
                x &lt;&lt;= 1;
                cnt &lt;&lt;= 1;
            }
            ans += cnt;
            a -= x;
        }
        return sign ? ans : -ans;
    }
}
</code></pre>
<h4 id="c"><a class="header" href="#c">C++</a></h4>
<pre><code class="language-cpp">class Solution {
public:
    int divide(int a, int b) {
        if (b == 1) {
            return a;
        }
        if (a == INT_MIN &amp;&amp; b == -1) {
            return INT_MAX;
        }
        bool sign = (a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0);
        a = a &gt; 0 ? -a : a;
        b = b &gt; 0 ? -b : b;
        int ans = 0;
        while (a &lt;= b) {
            int x = b;
            int cnt = 1;
            while (x &gt;= (INT_MIN &gt;&gt; 1) &amp;&amp; a &lt;= (x &lt;&lt; 1)) {
                x &lt;&lt;= 1;
                cnt &lt;&lt;= 1;
            }
            ans += cnt;
            a -= x;
        }
        return sign ? ans : -ans;
    }
};
</code></pre>
<h4 id="go"><a class="header" href="#go">Go</a></h4>
<pre><code class="language-go">func divide(a int, b int) int {
	if b == 1 {
		return a
	}
	if a == math.MinInt32 &amp;&amp; b == -1 {
		return math.MaxInt32
	}

	sign := (a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0)
	if a &gt; 0 {
		a = -a
	}
	if b &gt; 0 {
		b = -b
	}
	ans := 0

	for a &lt;= b {
		x := b
		cnt := 1
		for x &gt;= (math.MinInt32&gt;&gt;1) &amp;&amp; a &lt;= (x&lt;&lt;1) {
			x &lt;&lt;= 1
			cnt &lt;&lt;= 1
		}
		ans += cnt
		a -= x
	}

	if sign {
		return ans
	}
	return -ans
}
</code></pre>
<h4 id="typescript"><a class="header" href="#typescript">TypeScript</a></h4>
<pre><code class="language-ts">function divide(a: number, b: number): number {
    if (b === 1) {
        return a;
    }
    if (a === -(2 ** 31) &amp;&amp; b === -1) {
        return 2 ** 31 - 1;
    }

    const sign: boolean = (a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0);
    a = a &gt; 0 ? -a : a;
    b = b &gt; 0 ? -b : b;
    let ans: number = 0;

    while (a &lt;= b) {
        let x: number = b;
        let cnt: number = 1;

        while (x &gt;= -(2 ** 30) &amp;&amp; a &lt;= x &lt;&lt; 1) {
            x &lt;&lt;= 1;
            cnt &lt;&lt;= 1;
        }

        ans += cnt;
        a -= x;
    }

    return sign ? ans : -ans;
}
</code></pre>
<h4 id="c-1"><a class="header" href="#c-1">C#</a></h4>
<pre><code class="language-cs">public class Solution {
    public int Divide(int a, int b) {
        if (b == 1) {
            return a;
        }
        if (a == int.MinValue &amp;&amp; b == -1) {
            return int.MaxValue;
        }
        bool sign = (a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0);
        a = a &gt; 0 ? -a : a;
        b = b &gt; 0 ? -b : b;
        int ans = 0;
        while (a &lt;= b) {
            int x = b;
            int cnt = 1;
            while (x &gt;= (int.MinValue &gt;&gt; 1) &amp;&amp; a &lt;= (x &lt;&lt; 1)) {
                x &lt;&lt;= 1;
                cnt &lt;&lt;= 1;
            }
            ans += cnt;
            a -= x;
        }
        return sign ? ans : -ans;
    }
}
</code></pre>
<h4 id="php"><a class="header" href="#php">PHP</a></h4>
<pre><code class="language-php">class Solution {
    /**
     * @param integer $a
     * @param integer $b
     * @return integer
     */

    function divide($a, $b) {
        if ($b == 0) {
            throw new Exception('Can not divide by 0');
        } elseif ($a == 0) {
            return 0;
        }
        if ($a == -2147483648 &amp;&amp; $b == -1) {
            return 2147483647;
        }
        $sign = $a &lt; 0 != $b &lt; 0;

        $a = abs($a);
        $b = abs($b);
        $ans = 0;
        while ($a &gt;= $b) {
            $x = $b;
            $cnt = 1;
            while ($a &gt;= $x &lt;&lt; 1) {
                $x &lt;&lt;= 1;
                $cnt &lt;&lt;= 1;
            }
            $a -= $x;
            $ans += $cnt;
        }

        return $sign ? -$ans : $ans;
    }
}
</code></pre>
<!-- tabs:end -->
<!-- solution:end -->
<!-- problem:end -->
</details>
<details><summary>Solution:</summary>
<pre><code class="language-java">package class033;

// 不用任何算术运算，只用位运算实现加减乘除
// 代码实现中你找不到任何一个算术运算符
// 测试链接 : https://leetcode.com/problems/divide-two-integers/
public class BitOperationAddMinusMultiplyDivide {

	public static int MIN = Integer.MIN_VALUE;

	public static int divide(int a, int b) {
		if (a == MIN &amp;&amp; b == MIN) {
			// a和b都是整数最小
			return 1;
		}
		if (a != MIN &amp;&amp; b != MIN) {
			// a和b都不是整数最小，那么正常去除
			return div(a, b);
		}
		if (b == MIN) {
			// a不是整数最小，b是整数最小
			return 0;
		}
		// a是整数最小，b是-1，返回整数最大，因为题目里明确这么说了
		if (b == neg(1)) {
			return Integer.MAX_VALUE;
		}
		// a是整数最小，b不是整数最小，b也不是-1
		a = add(a, b &gt; 0 ? b : neg(b));
		int ans = div(a, b);
		int offset = b &gt; 0 ? neg(1) : 1;
		return add(ans, offset);
	}

	// 必须保证a和b都不是整数最小值，返回a除以b的结果
	public static int div(int a, int b) {
		int x = a &lt; 0 ? neg(a) : a;
		int y = b &lt; 0 ? neg(b) : b;
		int ans = 0;
		for (int i = 30; i &gt;= 0; i = minus(i, 1)) {
			if ((x &gt;&gt; i) &gt;= y) {
				ans |= (1 &lt;&lt; i);
				x = minus(x, y &lt;&lt; i);
			}
		}
		return a &lt; 0 ^ b &lt; 0 ? neg(ans) : ans;
	}

	public static int add(int a, int b) {
		int ans = a;
		while (b != 0) {
			// ans : a和b无进位相加的结果
			ans = a ^ b;
			// b : a和b相加时的进位信息
			b = (a &amp; b) &lt;&lt; 1;
			a = ans;
		}
		return ans;
	}

	public static int minus(int a, int b) {
		return add(a, neg(b));
	}

	public static int neg(int n) {
		return add(~n, 1);
	}

	// 这种乘法后面有大用处，尤其是求(a的b次方 % m)的结果，也叫龟速乘
	public static int multiply(int a, int b) {
		int ans = 0;
		while (b != 0) {
			if ((b &amp; 1) != 0) {
				// 考察b当前最右的状态！
				ans = add(ans, a);
			}
			a &lt;&lt;= 1;
			b &gt;&gt;&gt;= 1;
		}
		return ans;
	}

}
</code></pre>
</details>
<details>
    <summary>YouTube Video:</summary>
    <iframe frameborder="0" allowfullscreen
        src="https://www.youtube.com/embed/v0D5Pq0bC4c?start=0">
    </iframe>
</details>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../binary-number/bitset-and-bitmap.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../dynamic-programming/intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../binary-number/bitset-and-bitmap.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../dynamic-programming/intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
